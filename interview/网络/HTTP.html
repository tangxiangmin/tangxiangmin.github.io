<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>HTTP | Shymean</title>
    <meta name="description" content="fe">
    <link rel="stylesheet" href="/interview/assets/style.4eab0d57.css">
    <link rel="modulepreload" href="/interview/assets/app.062798f6.js">
    <link rel="modulepreload" href="/interview/assets/网络_HTTP.md.9b2f2fd5.lean.js">
    
    <meta name="twitter:title" content="HTTP | Shymean">
  <meta property="og:title" content="HTTP | Shymean">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="nav-bar" data-v-40587210><div class="sidebar-button" data-v-40587210><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/interview/" aria-label="Shymean, back to home" data-v-40587210 data-v-016a8bd8><!----> Shymean</a><div class="flex-grow" data-v-40587210></div><div class="nav" data-v-40587210><nav class="nav-links" data-v-40587210 data-v-35b91e7e><!--[--><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item" href="/interview/导读" data-v-49fe041d>导读 <!----></a></div></div><div class="item" data-v-35b91e7e><div class="nav-dropdown-link" data-v-35b91e7e data-v-18d75f62><button class="button" data-v-18d75f62><span class="button-text" data-v-18d75f62>前端</span><span class="right button-arrow" data-v-18d75f62></span></button><ul class="dialog" data-v-18d75f62><!--[--><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/interview/前端/HTML/HTML" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>HTML</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/interview/前端/CSS/README" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>CSS</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/interview/前端/JavaScript/README" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>JavaScript</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/interview/前端/库与框架/README" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>库与框架</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/interview/前端/业务相关/前端工程化" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>业务相关</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/interview/源码分析/README" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>源码分析</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item" href="/interview/App/Android" data-v-49fe041d>App <!----></a></div></div><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item" href="/interview/后台/README" data-v-49fe041d>后台 <!----></a></div></div><div class="item" data-v-35b91e7e><div class="nav-dropdown-link" data-v-35b91e7e data-v-18d75f62><button class="button" data-v-18d75f62><span class="button-text" data-v-18d75f62>计算机基础</span><span class="right button-arrow" data-v-18d75f62></span></button><ul class="dialog" data-v-18d75f62><!--[--><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/interview/计算机基础/README" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>计算机基础</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/interview/数据结构和算法/README" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>数据结构和算法</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/interview/网络/README" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>网络</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item" href="/interview/面试/README" data-v-49fe041d>面试 <!----></a></div></div><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item" href="/interview/游戏开发/README" data-v-49fe041d>游戏开发 <!----></a></div></div><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item" href="/interview/读书笔记/README" data-v-49fe041d>读书笔记 <!----></a></div></div><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item isExternal" href="https://github.com/tangxiangmin/interview" target="_blank" rel="noopener noreferrer" data-v-49fe041d>github <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-49fe041d><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item isExternal" href="https://shymean.com" target="_blank" rel="noopener noreferrer" data-v-49fe041d>shymean <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-49fe041d><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><!--]--><!----><!----></nav></div><!--[--><!--]--></header><aside class="sidebar" data-v-17c48e2f><nav class="nav-links nav" data-v-17c48e2f data-v-35b91e7e><!--[--><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item" href="/interview/导读" data-v-49fe041d>导读 <!----></a></div></div><div class="item" data-v-35b91e7e><div class="nav-dropdown-link" data-v-35b91e7e data-v-18d75f62><button class="button" data-v-18d75f62><span class="button-text" data-v-18d75f62>前端</span><span class="right button-arrow" data-v-18d75f62></span></button><ul class="dialog" data-v-18d75f62><!--[--><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/interview/前端/HTML/HTML" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>HTML</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/interview/前端/CSS/README" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>CSS</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/interview/前端/JavaScript/README" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>JavaScript</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/interview/前端/库与框架/README" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>库与框架</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/interview/前端/业务相关/前端工程化" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>业务相关</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/interview/源码分析/README" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>源码分析</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item" href="/interview/App/Android" data-v-49fe041d>App <!----></a></div></div><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item" href="/interview/后台/README" data-v-49fe041d>后台 <!----></a></div></div><div class="item" data-v-35b91e7e><div class="nav-dropdown-link" data-v-35b91e7e data-v-18d75f62><button class="button" data-v-18d75f62><span class="button-text" data-v-18d75f62>计算机基础</span><span class="right button-arrow" data-v-18d75f62></span></button><ul class="dialog" data-v-18d75f62><!--[--><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/interview/计算机基础/README" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>计算机基础</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/interview/数据结构和算法/README" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>数据结构和算法</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/interview/网络/README" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>网络</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item" href="/interview/面试/README" data-v-49fe041d>面试 <!----></a></div></div><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item" href="/interview/游戏开发/README" data-v-49fe041d>游戏开发 <!----></a></div></div><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item" href="/interview/读书笔记/README" data-v-49fe041d>读书笔记 <!----></a></div></div><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item isExternal" href="https://github.com/tangxiangmin/interview" target="_blank" rel="noopener noreferrer" data-v-49fe041d>github <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-49fe041d><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item isExternal" href="https://shymean.com" target="_blank" rel="noopener noreferrer" data-v-49fe041d>shymean <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-49fe041d><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><!--]--><!----><!----></nav><!--[--><!--]--><ul class="sidebar-links" data-v-17c48e2f><!--[--><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/网络/DNS">DNS</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item active" href="/interview/网络/HTTP">HTTP</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#http">HTTP</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#常见的请求方法">常见的请求方法</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#首部行字段">首部行字段</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#常见的状态码">常见的状态码</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#keep-alive">keep-alive</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#http缓存">HTTP缓存</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#身份识别">身份识别</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#cookie">Cookie</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#session">Session</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#https原理">HTTPS原理</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#http2新特性">HTTP2新特性</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#二进制格式传输与多路复用">二进制格式传输与多路复用</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#hpack-首部压缩">HPACK 首部压缩</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#server-push">server push</a><!----></li></ul></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/网络/Nginx">Nginx</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/网络/RPC">RPC</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/网络/前端网络请求">前端网络请求</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/网络/抓包">抓包</a><!----></li><!--]--></ul><!--[--><!--]--></aside><div class="sidebar-mask"></div><main class="page" data-v-8fcebc32><div class="container" data-v-8fcebc32><!--[--><!--]--><div style="position:relative;" class="content" data-v-8fcebc32><div><h2 id="http" tabindex="-1">HTTP <a class="header-anchor" href="#http" aria-hidden="true">#</a></h2><p>参考之前整理的<a href="https://www.shymean.com/archive/HTTP" target="_blank" rel="noopener noreferrer">HTTP系列</a></p><p>HTTP：超文本传输协议（英文：<code>HyperText Transfer Protocol</code>，缩写：HTTP）是一种用于分布式、协作式和超媒体信息系统的应用层协议，是万维网的数据通信的基础。</p><p>HTTP报文是浏览器和服务器之间发送的数据块，报文主要包含三个部分</p><ul><li>对报文进行描述的起始行</li><li>包含属性的首部块</li><li>可选的，包含数据的主体部分</li></ul><p>请求报文和响应报文最主要的结构区别在于起始行不一样：</p><ul><li>请求报文的首部行包含请求方法，资源URL和HTTP版本号</li><li>响应报文包含HTTP版本号，请求资源的响应状态（一个三位数）和原因短语（一个英语短语文本）</li></ul><h3 id="常见的请求方法" tabindex="-1">常见的请求方法 <a class="header-anchor" href="#常见的请求方法" aria-hidden="true">#</a></h3><p>GET和POST的区别，就日常使用经验来看</p><ul><li>目的不同，Get是用来从服务器上获得数据，而Post是用来向服务器上传递数据。</li><li>传递请求数据的方式不同，GET将参数添加在URL的查询字段后（URL位于请求报文的起始行），而POST将请求数据放在请求报文的主体部分</li><li>由于浏览器可能缓存带有查询字段的URL，因此不能保证安全而被其他访问者查看；此外，某些浏览器对于URL的长度是有限制的，服务器一般也对URL长度有某些限制（超过会返回414错误），因此在需要向服务器传递大量数据的时候一般使用POST方法</li></ul><p>但是需要认识到，HTTP最初设定了八种请求方法。这些方法方法本质上没有任何区别。只是让请求更加有语义而已，只是由于浏览器/服务器的限制，导致他们在应用过程中体现出一些不同。因此关于GET和POST的区别</p><ul><li>主要在于语义化含义，以及服务器的一些限制而已</li><li>貌似部分浏览器和框架对于GET会发送一个TCP包，POST会发送两个包，但并不全是这样，具体可以参考<a href="https://blog.csdn.net/zerooffdate/article/details/78962818" target="_blank" rel="noopener noreferrer">这里</a></li></ul><h3 id="首部行字段" tabindex="-1">首部行字段 <a class="header-anchor" href="#首部行字段" aria-hidden="true">#</a></h3><p>参考：<a href="http://www.jianshu.com/p/6e86903d74f7" target="_blank" rel="noopener noreferrer">前端必备HTTP技能之HTTP请求头响应头中常用字段详解</a></p><p>首部行携带了一些关于报文的原始信息，可分为通用首部、请求首部、响应首部、实体首部等。</p><h3 id="常见的状态码" tabindex="-1">常见的状态码 <a class="header-anchor" href="#常见的状态码" aria-hidden="true">#</a></h3><p>状态码是一个三位数，第一位描述状态的一般类别（成功，失败...），后两位描述状态的详细信息</p><ul><li>1表示信息提示</li><li>2表示请求成功</li><li>3表示重定向，要么告知客户端使用替代位置来访问他们感兴趣的资源，要么是服务器提供一个替代的响应而不是请求资源的内容</li><li>4表示客户端错误，指浏览器发送了服务器无法处理的内容</li><li>5表示服务端错误</li></ul><p><a href="https://www.cnblogs.com/starof/p/5035119.html" target="_blank" rel="noopener noreferrer">HTTP常见状态码</a></p><h3 id="keep-alive" tabindex="-1">keep-alive <a class="header-anchor" href="#keep-alive" aria-hidden="true">#</a></h3><p>在早期，当一个http请求响应完毕后，就会断开本次tcp连接。如果http请求比较频繁，这种为单个请求建立tcp连接的方式就比较浪费。</p><p>可以通过配置<code>Connection：keep-alive</code>和<code>Keep-Alive:timeout=x,max=xx</code>的响应头来改善这种状态。</p><p>可以理解为HTTP的 <code>keep-alive</code>是为了让tcp活得更久一点：当一个http相应完毕后，理应立即关闭本次链接，服务端此时会等待<code>timeout</code>秒，然后才关闭这个链接。</p><h2 id="http缓存" tabindex="-1">HTTP缓存 <a class="header-anchor" href="#http缓存" aria-hidden="true">#</a></h2><p>缓存的好处:</p><ul><li>减轻了服务器的压力，服务器不必为来自同一个客户端的资源请求进行重复处理</li><li>提高了客户端的加载速度，从本地或者就近的缓存中读取资源，比从遥远的服务器获取资源要快得多</li></ul><p>下面是与缓存相关的一些条件请求头部</p><ul><li><code>if-Modified-Since</code> 设置更新时间，从更新时间到服务端接受请求这段时间内如果资源没有改变，允许服务端返回304 Not Modified</li><li><code>If-None-Match</code>设置客户端ETag，如果和服务端接受请求生成的ETage相同，允许服务端返回304 Not Modified</li><li><code>If-Match</code>设置客户端的ETag,当时客户端ETag和服务器生成的ETag一致才执行，适用于更新自从上次更新之后没有改变的资源</li><li><code>If-Range</code>设置客户端ETag，如果和服务端接受请求生成的ETage相同，返回缺失的实体部分；否则返回整个新的实体</li><li><code>If-Unmodified-Since</code> 设置更新时间，只有从更新时间到服务端接受请求这段时间内实体没有改变，服务端才会发送响应</li></ul><p>下面是强缓存和协商缓存的相关流程</p><div class="language-"><pre><code>@startuml  cache
start
:请求资源;
if(浏览器私有缓存) then (Y)
    if(新鲜度检测) then(Y)
        :200(from cache);
        stop
    else (N)
        if(服务器再验证) then(Y)
            :HTTP 304;
            :浏览器更新新鲜度;
            :304(not modified);
            stop
        endif
    endif
else (N)
    :未命中缓存，直接请求资源;
endif

if(资源存在) then(Y)
    :新内存存入缓存;
    :HTTP 200;
    stop
else 
    :HTTP 404;
    stop
@enduml
</code></pre></div><p><img src="http://img.shymean.com/oPic/1620227891123_947.png" alt=""></p><h2 id="身份识别" tabindex="-1">身份识别 <a class="header-anchor" href="#身份识别" aria-hidden="true">#</a></h2><h3 id="cookie" tabindex="-1">Cookie <a class="header-anchor" href="#cookie" aria-hidden="true">#</a></h3><p>Cookie是服务器发送到用户浏览器并保存在浏览器上的一块数据，它会在浏览器下一次发起请求时被携带并发送到服务器上。Cookie的使用使得基于无状态的HTTP协议上记录稳定的状态信息成为了可能。</p><p>Cookie非常依赖于浏览器，不同浏览器之间的Cookie是不能通用的。可以笼统地将Cookie分为两类：会话Cookie和持久Cookie:</p><ul><li>会话Cookie是临时Cookie，用户退出浏览器时Cookie就被删除了（并不是关闭标签页就删除哦）</li><li>持久Cookie是指会被保存在硬盘上的Cookie信息，浏览器退出，计算机重启时他们仍然存在。</li><li>会话Cookie与持久Cookie的区别在于是否为他们设置了过期时间（马上就会提到），如果没有，则为会话Cookie。接下来看看服务器是如何在响应报文中设置Cookie的</li></ul><p>服务端通过响应报文的<code>Set-Cookie</code>字段设置Cookie</p><div class="language-"><pre><code>Set-Cookie: &lt;cookie-name&gt;=&lt;cookie-value&gt;; [Domain=&lt;domain-value&gt;;][Secure;][HttpOnly;][Expires=&lt;date&gt;][Max-Age=&lt;non-zero-digit&gt;][Path=&lt;path-value&gt;]
</code></pre></div><p>需要注意服务端<code>Set-Cookie</code>一些特殊的修饰符</p><ul><li><code>Secure</code>，表示只有在HTTP使用SSL安全连接时才发送该cookie</li><li><code>HttpOnly</code>，表示该Cookie无法被客户端Javascript操作</li></ul><p>浏览器通过请求报文的<code>Cookie</code>字段发送Cookie</p><div class="language-"><pre><code>Cookie: name=value; name2=value2; name3=value3
</code></pre></div><p>在浏览器中可以通过<code>document.cookie</code>来操作cookie。</p><h3 id="session" tabindex="-1">Session <a class="header-anchor" href="#session" aria-hidden="true">#</a></h3><p>Cookie将用户身份信息保存在浏览器，并在每次请求时携带对应信息到服务器。此外，在服务器保存用户身份的做法是可行的，这种方式称为<code>Session</code>。维持session会话的核心就是客户端的唯一标识，即SessionID，SessionID就像是用户的身份证账号一样，只需要提供值，服务器就会自动检索并查找到用户的身份信息。</p><p>传递sessionId一般有下面几种方式</p><ul><li>最常用的方式是通过Cookie</li><li>通过URL参数</li><li>通过表单隐藏字段</li></ul><p>服务器使用类似于散列表的结构来保存多个用户的信息，每个用户的信息使用SessionID来索引，这就是SessionID必须唯一且不能被伪造的原因。 用户信息可以保存在内存中，文件中或者数据库中。</p><h2 id="https原理" tabindex="-1">HTTPS原理 <a class="header-anchor" href="#https原理" aria-hidden="true">#</a></h2><p>参考：<a href="https://www.shymean.com/article/%E5%8D%87%E7%BA%A7%E5%8D%9A%E5%AE%A2%E5%88%B0HTTPS" target="_blank" rel="noopener noreferrer">升级博客到HTTPS</a>，后面用伪代码整理了https的基本原理。</p><p>超文本传输安全协议（Hypertext Transfer Protocol Secure）HTTPS相对HTTP提供了更安全的数据传输保障。主要体现在三个方面：</p><ul><li>内容加密。客户端到服务器的内容都是以加密形式传输，中间者无法直接查看明文内容。</li><li>身份认证。通过校验保证客户端访问的是自己的服务器。</li><li>数据完整性。防止内容被第三方冒充或者篡改。</li></ul><p>需要了解两种加密方式</p><ul><li>对称加密，服务端和客户端的加密和解密都使用相同的加密和解密方式，效率比较高，缺点是第一次发送时密钥可能被盗取，常见的对称加密算法有<code>DES</code>、<code>AES</code>等</li><li>公开密钥加密，服务端和客户端使用独立的加密解密方法，并通过对方的加密方法加密需要发送的报文，通过自己的解密方法接收对方发送的报文，安全性比较高，缺点是效率比较低，常见的非对称密钥加密算法有<code>RSA</code>、<code>DSA</code>等</li></ul><p>为了提高安全性和效率，HTTPS结合了对称和非对称两种加密方式：在握手阶段使用公开密钥加密选择一种对称加密算法和密钥，然后在后续的通信阶段使用选择的对称加密算法和密钥进行通信。</p><p>使用公开密钥方式仍旧存在缺点，即无法保证传输的公开密钥是货真价实的，因此还需要使用数字证书，数字证书通常是由受信任的数字证书颁发机构CA，公钥就被包含在数字证书中。</p><ul><li>在验证服务器身份后颁发证书，证书中包含了一个密钥对（公钥和私钥）和所有者识别信息。</li><li>在建立链接时，服务端发送者证书和到客户端，客户端使用证书对比签名，确认证书内的公钥是否是合法的，</li><li>如果是合法的，则将选择的某种对称加密方式加密后发送至服务端，完成密钥协商，然后继续后续的报文加密</li></ul><p>为什么证书可以确保公开密钥的真实性呢？这是因为，证书是不能被伪造的，在签发证书时就会验证域名及域名所有者的身份。浏览器和系统内置了默认信任的证书，验证证书的过程如下</p><ul><li>检查SSL证书是否由浏览器中“受信任的根证书颁发机构”颁发</li><li>检查部署SSL证书的网站域名是否与证书中一致</li><li>检查SSL证书中的证书吊销列表，证书是否被颁发机构吊销</li><li>检查此SSL证书是否过期</li><li>浏览器会到欺诈网站数据库查询此网站是否被列入黑名单</li></ul><h2 id="http2新特性" tabindex="-1">HTTP2新特性 <a class="header-anchor" href="#http2新特性" aria-hidden="true">#</a></h2><p>参考</p><ul><li><a href="https://juejin.im/post/5c6a9f85e51d4503831ad4fa" target="_blank" rel="noopener noreferrer">从理论到实践 全面理解HTTP/2</a></li></ul><h3 id="二进制格式传输与多路复用" tabindex="-1">二进制格式传输与多路复用 <a class="header-anchor" href="#二进制格式传输与多路复用" aria-hidden="true">#</a></h3><p>在HTTP/2中，新增了二进制分帧层，将数据转换成二进制，也就是说HTTP/2中所有的内容都是采用二进制传输</p><p>帧是HTTP/2中数据传输的最小单位；每个帧都有stream_ID字段，表示这个帧属于哪个流，接收方把stream_ID相同的所有帧组合到一起就是被传输的内容了。HTTP/2共定义了十种帧，较为常见的有数据帧、头部帧、PING帧、SETTING帧、优先级帧和PUSH_PROMISE帧等，为将来的高级应用打好了基础</p><p>在这种<strong>多路复用</strong>传输模式下，HTTP请求变得十分廉价，我们不需要再时刻顾虑网站的http请求数是否太多、TCP连接数是否太多、是否会产生阻塞等问题了。</p><h3 id="hpack-首部压缩" tabindex="-1">HPACK 首部压缩 <a class="header-anchor" href="#hpack-首部压缩" aria-hidden="true">#</a></h3><p>HTTP/1中，每个请求和响应都会携带对应的头部信息，每个页面的请求越多，越来越多的请求导致消耗在头部的流量越来越多，尤其是每次都要传输 UserAgent、Cookie 这类不会频繁变动的内容，完全是一种浪费</p><p>为了减少冗余的头部信息带来的消耗，HTTP/2采用HPACK 算法压缩请求和响应的header。其具体原理为</p><ul><li>通信双方共同维护了一份静态表，包含了常见的头部名称与值的组合（比如method:GET，可以存在表中，然后只需要传递一个键名即可）</li><li>根据先入先出的原则，维护一份可动态添加内容的动态表</li><li>用基于该静态哈夫曼码表的哈夫曼编码数据</li></ul><p>这样可以极大地节省头部的消耗</p><h3 id="server-push" tabindex="-1">server push <a class="header-anchor" href="#server-push" aria-hidden="true">#</a></h3><p>HTTP/2的server push允许服务器在未收到请求时主动向浏览器推送资源。这样可以将资源提前推送到到浏览器：除了静态文件，还可以推送比较耗时的API</p><p>在HTTP1.1时代，也有提前获取资源的方法，如preload和prefetch，</p><ul><li>preload是在页面解析初期就告诉浏览器，这个资源是浏览器马上要用到的，可以立刻发送对资源的请求，当需要用到该资源时就可以直接用而不用等待请求和响应的返回了</li><li>prefetch是当前页面用不到但下一页面可能会用到的资源，优先级较低，只有当浏览器空闲时才会请求prefetch标记的资源。</li></ul><p>从应用层面上看，preload和server push并没有什么区别，但是server push减少浏览器请求的时间，略优于preload，在一些场景中，可以将两者结合使用。</p></div></div><footer class="page-footer" data-v-8fcebc32 data-v-b65b4b36><div class="edit" data-v-b65b4b36><div class="edit-link" data-v-b65b4b36 data-v-55695e90><!----></div></div><div class="updated" data-v-b65b4b36><!----></div></footer><div class="next-and-prev-link" data-v-8fcebc32 data-v-e65a9748><div class="container" data-v-e65a9748><div class="prev" data-v-e65a9748><a class="link" href="/interview/网络/DNS" data-v-e65a9748><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-prev" data-v-e65a9748><path d="M19,11H7.4l5.3-5.3c0.4-0.4,0.4-1,0-1.4s-1-0.4-1.4,0l-7,7c-0.1,0.1-0.2,0.2-0.2,0.3c-0.1,0.2-0.1,0.5,0,0.8c0.1,0.1,0.1,0.2,0.2,0.3l7,7c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3c0.4-0.4,0.4-1,0-1.4L7.4,13H19c0.6,0,1-0.4,1-1S19.6,11,19,11z"></path></svg><span class="text" data-v-e65a9748>DNS</span></a></div><div class="next" data-v-e65a9748><a class="link" href="/interview/网络/Nginx" data-v-e65a9748><span class="text" data-v-e65a9748>Nginx</span><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-next" data-v-e65a9748><path d="M19.9,12.4c0.1-0.2,0.1-0.5,0-0.8c-0.1-0.1-0.1-0.2-0.2-0.3l-7-7c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l5.3,5.3H5c-0.6,0-1,0.4-1,1s0.4,1,1,1h11.6l-5.3,5.3c-0.4,0.4-0.4,1,0,1.4c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3l7-7C19.8,12.6,19.9,12.5,19.9,12.4z"></path></svg></a></div></div></div><!--[--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"app_android.md\":\"a181c9ce\",\"app_flutter.md\":\"f515bb02\",\"app_ios.md\":\"1eba1583\",\"app_webview.md\":\"58fc22cc\",\"readme.md\":\"d8359e04\",\"index.md\":\"8c37c295\",\"前端_css_css3.md\":\"a8d69721\",\"前端_css_readme.md\":\"1a0c99cd\",\"前端_css_分辨率.md\":\"6debbf62\",\"前端_css_基础知识.md\":\"bb24a0e9\",\"前端_css_性能优化.md\":\"1d428186\",\"前端_css_核心知识.md\":\"5c8a18aa\",\"前端_css_编写样式表.md\":\"2393cab5\",\"前端_css_选择器.md\":\"8d2efe94\",\"前端_html_html.md\":\"6888f85e\",\"前端_html_seo优化.md\":\"18abd121\",\"前端_html_web components.md\":\"d2e2e387\",\"前端_html_webassembly.md\":\"f763b06c\",\"前端_html_浏览器解析与渲染流程.md\":\"feec3301\",\"前端_javascript_canvas.md\":\"fe71edfd\",\"前端_javascript_dom和bom.md\":\"e386373b\",\"前端_javascript_ecmascript.md\":\"306272b4\",\"前端_javascript_eventloop.md\":\"dad49dfb\",\"前端_javascript_nodejs.md\":\"41aad6fe\",\"前端_javascript_readme.md\":\"1014db19\",\"前端_javascript_typescript.md\":\"87b58e31\",\"前端_javascript_事件流.md\":\"927305b3\",\"前端_javascript_函数式编程.md\":\"8742c510\",\"前端_javascript_原型.md\":\"51e3fc3c\",\"前端_javascript_数据类型.md\":\"7998939f\",\"前端_javascript_正则.md\":\"8b37b015\",\"前端_javascript_运算符.md\":\"21cafa0e\",\"前端_readme.md\":\"ab123e3e\",\"前端_业务相关_ab测试.md\":\"e21b4e67\",\"前端_业务相关_babel.md\":\"223a9049\",\"前端_业务相关_ci.md\":\"843c3666\",\"前端_业务相关_docker.md\":\"9d9bfe23\",\"前端_业务相关_web直播.md\":\"ccfe19c8\",\"前端_业务相关_git.md\":\"ea8aaed1\",\"前端_业务相关_mock.md\":\"0ea359a0\",\"前端_业务相关_npm.md\":\"0320bd1f\",\"前端_业务相关_webpack.md\":\"231ea6bb\",\"前端_业务相关_web安全.md\":\"6f217686\",\"前端_业务相关_前端工程化.md\":\"59a55c3d\",\"前端_业务相关_单元测试.md\":\"105fb80d\",\"前端_业务相关_可视化页面工具.md\":\"a762b606\",\"前端_业务相关_微前端.md\":\"00a64404\",\"前端_业务相关_性能优化.md\":\"22c16637\",\"前端_业务相关_数据埋点.md\":\"4b392fcd\",\"前端_业务相关_模块化.md\":\"699e8fe0\",\"前端_业务相关_类前端业务.md\":\"1518c654\",\"前端_业务相关_调试.md\":\"b74224c3\",\"前端_业务相关_跨端.md\":\"3399295e\",\"前端_库与框架_chrome扩展程序.md\":\"164ec012\",\"前端_库与框架_electron.md\":\"7016de33\",\"前端_库与框架_immutable.md\":\"b3e9c89d\",\"前端_库与框架_readme.md\":\"c02fdd8d\",\"前端_库与框架_react.md\":\"5c2ba656\",\"前端_库与框架_rxjs.md\":\"ee62fdcc\",\"前端_库与框架_svelet.md\":\"0651e73d\",\"前端_库与框架_vue.md\":\"4ab66354\",\"前端_库与框架_vuex.md\":\"0562f61d\",\"前端_库与框架_diff算法.md\":\"421eb89a\",\"前端_库与框架_几种框架的对比.md\":\"6378b5a1\",\"前端_库与框架_单页面应用router.md\":\"c41c8084\",\"前端_库与框架_微信小程序.md\":\"0eabf379\",\"前端_库与框架_技术选型.md\":\"38e95d40\",\"后台_clickhouse.md\":\"078143d4\",\"后台_java.md\":\"d112d350\",\"后台_mongodb.md\":\"a3e4dffb\",\"后台_mysql.md\":\"c195dbea\",\"后台_php.md\":\"791fb60e\",\"后台_readme.md\":\"dcf7fe6d\",\"后台_restful.md\":\"561380b3\",\"导读.md\":\"fbc538c3\",\"数据结构和算法_readme.md\":\"7336ddb0\",\"数据结构和算法_动态规划.md\":\"2c12c37a\",\"数据结构和算法_基本数据结构.md\":\"409b57c2\",\"数据结构和算法_基本算法.md\":\"082e3f23\",\"数据结构和算法_栈.md\":\"498ae413\",\"游戏开发_readme.md\":\"2a2fa357\",\"游戏开发_tiledmap教程汇总.md\":\"9f943a6e\",\"游戏开发_技能系统.md\":\"94d049cb\",\"游戏开发_游戏开发之前的准备.md\":\"c8451bcf\",\"游戏开发_游戏类型.md\":\"2d673e90\",\"源码分析_readme.md\":\"3363b547\",\"源码分析_reactfibler源码分析.md\":\"f04a13c5\",\"源码分析_react源码分析.md\":\"71769f59\",\"源码分析_redux源码分析.md\":\"489f7654\",\"源码分析_axios源码分析.md\":\"b709d6ad\",\"源码分析_koa源码分析.md\":\"099f4a1f\",\"网络_dns.md\":\"da6f33ac\",\"网络_http.md\":\"9b2f2fd5\",\"网络_nginx.md\":\"757b21cb\",\"网络_readme.md\":\"2814b435\",\"网络_rpc.md\":\"651e6edc\",\"网络_前端网络请求.md\":\"dfd29831\",\"网络_抓包.md\":\"14cc2a9a\",\"计算机基础_readme.md\":\"c2582b09\",\"计算机基础_操作系统.md\":\"e8ebf08e\",\"计算机基础_编译原理.md\":\"78e59630\",\"计算机基础_计算机网络.md\":\"9612960b\",\"计算机基础_软件工程.md\":\"a23cd2bf\",\"读书笔记_readme.md\":\"02cec0b1\",\"读书笔记_如何阅读一本书.md\":\"90e7dc29\",\"面试_readme.md\":\"9f7d45aa\",\"面试_面试记录_2017_dae.md\":\"9ffa0cb7\",\"面试_面试记录_2017_te.md\":\"4af7fa04\",\"面试_面试记录_2018_ayldm.md\":\"78e553fb\",\"面试_面试记录_2018_hdjr.md\":\"a7957552\",\"面试_面试记录_2018_md.md\":\"3d273eb4\",\"面试_面试记录_2018_pakj.md\":\"721ccbcc\",\"面试_面试记录_2018_qkcj.md\":\"d74760cb\",\"面试_面试记录_2018_sfwy.md\":\"727f8ae3\",\"面试_面试记录_2018_tw.md\":\"3457798d\",\"面试_面试记录_2018_yhkj.md\":\"15faec21\",\"面试_面试记录_2018_yskj.md\":\"fb191150\",\"面试_面试记录_2018_z8.md\":\"f92e6e47\",\"面试_面试记录_2019_bcz.md\":\"6a50a51a\",\"面试_面试记录_2019_hkjt.md\":\"45565128\",\"面试_面试记录_2019_jrtt.md\":\"657c087c\",\"面试_面试记录_2019_lds.md\":\"5acb47b1\",\"面试_面试记录_2019_qexr.md\":\"cd2da172\",\"面试_面试记录_2019_wblz.md\":\"93a713cf\",\"面试_面试记录_2019_xflx.md\":\"0469f444\",\"面试_面试题_css.md\":\"de7ab8c1\",\"面试_面试题_dom.md\":\"e0bba38e\",\"面试_面试题_ecmascript.md\":\"ebc72eba\",\"面试_面试题_html.md\":\"6869b9ef\",\"面试_面试题_readme.md\":\"3ea870b6\",\"面试_面试题_react.md\":\"b6c9e1fe\",\"面试_面试题_vue.md\":\"33d60e01\",\"面试_面试题_代码实现.md\":\"b7685612\",\"面试_面试题_代码阅读.md\":\"0048adfd\",\"面试_面试题_其他问题.md\":\"4d3285e4\",\"面试_面试题_兼容及bug.md\":\"bdd9bcf3\",\"面试_面试题_常见需求.md\":\"ba5c5b1d\",\"面试_面试题_算法实现.md\":\"24d2121b\",\"面试_面试题_网络.md\":\"c94234b4\"}")</script>
    <script type="module" async src="/interview/assets/app.062798f6.js"></script>
    
  </body>
</html>