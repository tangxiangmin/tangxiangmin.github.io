<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>问题 | Shymean</title>
    <meta name="description" content="fe">
    <link rel="stylesheet" href="/interview/assets/style.4eab0d57.css">
    <link rel="modulepreload" href="/interview/assets/app.062798f6.js">
    <link rel="modulepreload" href="/interview/assets/计算机基础_计算机网络.md.9612960b.lean.js">
    
    <meta name="twitter:title" content="问题 | Shymean">
  <meta property="og:title" content="问题 | Shymean">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="nav-bar" data-v-40587210><div class="sidebar-button" data-v-40587210><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/interview/" aria-label="Shymean, back to home" data-v-40587210 data-v-016a8bd8><!----> Shymean</a><div class="flex-grow" data-v-40587210></div><div class="nav" data-v-40587210><nav class="nav-links" data-v-40587210 data-v-35b91e7e><!--[--><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item" href="/interview/导读" data-v-49fe041d>导读 <!----></a></div></div><div class="item" data-v-35b91e7e><div class="nav-dropdown-link" data-v-35b91e7e data-v-18d75f62><button class="button" data-v-18d75f62><span class="button-text" data-v-18d75f62>前端</span><span class="right button-arrow" data-v-18d75f62></span></button><ul class="dialog" data-v-18d75f62><!--[--><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/interview/前端/HTML/HTML" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>HTML</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/interview/前端/CSS/README" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>CSS</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/interview/前端/JavaScript/README" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>JavaScript</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/interview/前端/库与框架/README" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>库与框架</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/interview/前端/业务相关/前端工程化" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>业务相关</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/interview/源码分析/README" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>源码分析</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item" href="/interview/App/Android" data-v-49fe041d>App <!----></a></div></div><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item" href="/interview/后台/README" data-v-49fe041d>后台 <!----></a></div></div><div class="item" data-v-35b91e7e><div class="nav-dropdown-link" data-v-35b91e7e data-v-18d75f62><button class="button" data-v-18d75f62><span class="button-text" data-v-18d75f62>计算机基础</span><span class="right button-arrow" data-v-18d75f62></span></button><ul class="dialog" data-v-18d75f62><!--[--><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/interview/计算机基础/README" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>计算机基础</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/interview/数据结构和算法/README" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>数据结构和算法</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/interview/网络/README" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>网络</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item" href="/interview/面试/README" data-v-49fe041d>面试 <!----></a></div></div><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item" href="/interview/游戏开发/README" data-v-49fe041d>游戏开发 <!----></a></div></div><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item" href="/interview/读书笔记/README" data-v-49fe041d>读书笔记 <!----></a></div></div><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item isExternal" href="https://github.com/tangxiangmin/interview" target="_blank" rel="noopener noreferrer" data-v-49fe041d>github <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-49fe041d><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item isExternal" href="https://shymean.com" target="_blank" rel="noopener noreferrer" data-v-49fe041d>shymean <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-49fe041d><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><!--]--><!----><!----></nav></div><!--[--><!--]--></header><aside class="sidebar" data-v-17c48e2f><nav class="nav-links nav" data-v-17c48e2f data-v-35b91e7e><!--[--><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item" href="/interview/导读" data-v-49fe041d>导读 <!----></a></div></div><div class="item" data-v-35b91e7e><div class="nav-dropdown-link" data-v-35b91e7e data-v-18d75f62><button class="button" data-v-18d75f62><span class="button-text" data-v-18d75f62>前端</span><span class="right button-arrow" data-v-18d75f62></span></button><ul class="dialog" data-v-18d75f62><!--[--><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/interview/前端/HTML/HTML" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>HTML</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/interview/前端/CSS/README" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>CSS</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/interview/前端/JavaScript/README" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>JavaScript</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/interview/前端/库与框架/README" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>库与框架</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/interview/前端/业务相关/前端工程化" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>业务相关</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/interview/源码分析/README" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>源码分析</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item" href="/interview/App/Android" data-v-49fe041d>App <!----></a></div></div><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item" href="/interview/后台/README" data-v-49fe041d>后台 <!----></a></div></div><div class="item" data-v-35b91e7e><div class="nav-dropdown-link" data-v-35b91e7e data-v-18d75f62><button class="button" data-v-18d75f62><span class="button-text" data-v-18d75f62>计算机基础</span><span class="right button-arrow" data-v-18d75f62></span></button><ul class="dialog" data-v-18d75f62><!--[--><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/interview/计算机基础/README" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>计算机基础</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/interview/数据结构和算法/README" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>数据结构和算法</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><li class="dialog-item" data-v-18d75f62><div class="nav-dropdown-link-item" data-v-18d75f62 data-v-07381bdb><a class="item" href="/interview/网络/README" data-v-07381bdb><span class="arrow" data-v-07381bdb></span><span class="text" data-v-07381bdb>网络</span><span class="icon" data-v-07381bdb><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item" href="/interview/面试/README" data-v-49fe041d>面试 <!----></a></div></div><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item" href="/interview/游戏开发/README" data-v-49fe041d>游戏开发 <!----></a></div></div><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item" href="/interview/读书笔记/README" data-v-49fe041d>读书笔记 <!----></a></div></div><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item isExternal" href="https://github.com/tangxiangmin/interview" target="_blank" rel="noopener noreferrer" data-v-49fe041d>github <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-49fe041d><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><div class="item" data-v-35b91e7e><div class="nav-link" data-v-35b91e7e data-v-49fe041d><a class="item isExternal" href="https://shymean.com" target="_blank" rel="noopener noreferrer" data-v-49fe041d>shymean <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-49fe041d><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><!--]--><!----><!----></nav><!--[--><!--]--><ul class="sidebar-links" data-v-17c48e2f><!--[--><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/计算机基础/操作系统">操作系统</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/计算机基础/编译原理">编译原理</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item active" href="/interview/计算机基础/计算机网络">计算机网络</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#问题">问题</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#协议分层">协议分层</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#dns是如何解析的">DNS是如何解析的</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#http-应用层">HTTP 应用层</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#运输层">运输层</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#tcp-三次握手">TCP 三次握手</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#tcp-四次挥手">TCP 四次挥手</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#udp">UDP</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#网络层">网络层</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#ip地址">IP地址</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#mac地址">Mac地址</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#链路层和物理层">链路层和物理层</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#服务器响应">服务器响应</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#cdn">CDN</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="/interview/计算机基础/软件工程">软件工程</a><!----></li><!--]--></ul><!--[--><!--]--></aside><div class="sidebar-mask"></div><main class="page" data-v-8fcebc32><div class="container" data-v-8fcebc32><!--[--><!--]--><div style="position:relative;" class="content" data-v-8fcebc32><div><h1 id="计算机网络" tabindex="-1">计算机网络 <a class="header-anchor" href="#计算机网络" aria-hidden="true">#</a></h1><p>参考：</p><ul><li><a href="http://www.shymean.com/article/%E3%80%8A%E7%BD%91%E7%BB%9C%E6%98%AF%E6%80%8E%E6%A0%B7%E8%BF%9E%E6%8E%A5%E7%9A%84%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0" target="_blank" rel="noopener noreferrer">《网络是怎样连接的》读书笔记</a></li><li><a href="https://www.shymean.com/article/%E3%80%8A%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C-%E8%87%AA%E9%A1%B6%E5%90%91%E4%B8%8B%E7%9A%84%E6%96%B9%E6%B3%95%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0" target="_blank" rel="noopener noreferrer">《计算机网络-自顶向下的方法》读书笔记</a></li></ul><h2 id="问题" tabindex="-1">问题 <a class="header-anchor" href="#问题" aria-hidden="true">#</a></h2><ul><li>TCP三次握手和四次挥手</li><li>url从地址栏输入到展示整个页面发生了什么</li><li>状态码</li><li>缓存控制</li><li>Token及JSON Web Token认证原理</li><li>Cookie、Session、LocalStorage和SessionStorage的作用及差异</li><li>https</li><li>HTTP2</li></ul><h2 id="协议分层" tabindex="-1">协议分层 <a class="header-anchor" href="#协议分层" aria-hidden="true">#</a></h2><p>参考：<a href="https://www.shymean.com/article/%E3%80%8A%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C-%E8%87%AA%E9%A1%B6%E5%90%91%E4%B8%8B%E7%9A%84%E6%96%B9%E6%B3%95%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0#1.3.%20%E5%8D%8F%E8%AE%AE%E5%88%86%E5%B1%82" target="_blank" rel="noopener noreferrer">协议分层</a></p><p>为了了解<strong>url从地址栏输入到展示整个页面发生了什么</strong>这个问题，需要对下面了解下面的概念</p><ul><li>DNS服务器解析域名</li><li>HTTP报文</li><li>TCP连接三次握手、四次挥手</li><li>IP地址</li><li>广播MAC寻址</li><li>服务器CGI程序</li></ul><h2 id="dns是如何解析的" tabindex="-1">DNS是如何解析的 <a class="header-anchor" href="#dns是如何解析的" aria-hidden="true">#</a></h2><h2 id="http-应用层" tabindex="-1">HTTP 应用层 <a class="header-anchor" href="#http-应用层" aria-hidden="true">#</a></h2><h2 id="运输层" tabindex="-1">运输层 <a class="header-anchor" href="#运输层" aria-hidden="true">#</a></h2><p>参考：</p><ul><li><a href="https://mp.weixin.qq.com/s/_pWRHVoYnPGym7GADLPUPw" target="_blank" rel="noopener noreferrer">TCP为啥要3次握手和4次挥手？握两次手不行吗？</a></li></ul><h3 id="tcp-三次握手" tabindex="-1">TCP 三次握手 <a class="header-anchor" href="#tcp-三次握手" aria-hidden="true">#</a></h3><p>TCP连接操作的大致流程如下</p><ul><li>第一步是在TCP模块创建表示控制信息的头部， <ul><li>设置发送方和接收方的端口号和SYN比特，通过头部中发送方和接收方的端口号可以找到要连接的套接字</li><li>然后客户端的TCP模块委托IP模块发送包含TCP头部的网络包，</li></ul></li><li>服务器的TCP模块会根据这个网络包的TCP头部信息找到需要连接的服务器套接字信息，并写入相关信息，修改为正在连接状态然后服务器的TCP模块会返回响应 <ul><li>这个过程与客户端一样，创建控制信息的头部。</li><li>此外在返回响应时还需要将ACK控制位设置为1，表示通信确认。</li><li>然后服务器的TCP模块委托其IP模块发送响应数据包</li></ul></li><li>客户端的TCP模块通过响应数据包的TCP头部信息确认连接服务器的操作是否成功，如果SYN为1则表示成功，此时会向客户端的套接字中写入服务器的IP地址、端口号等信息后，客户端需要将ACK比特设置为1然后发回服务器，告知服务器刚才的响应包已经收到</li></ul><p>可以看见，上面一共进行了三次数据包的发送（客户端两次，服务器一次），因此被称为三次握手。</p><h3 id="tcp-四次挥手" tabindex="-1">TCP 四次挥手 <a class="header-anchor" href="#tcp-四次挥手" aria-hidden="true">#</a></h3><p>在数据收发完成以后，就可以选择断开连接了。完成数据的发送的一方会断开过程，这里以服务器举例：</p><ul><li>首先，服务器协议栈会生成包含断开信息的TCP头部（即将FIN比特设为1），接着委托IP模块发送，同时，服务器的套接字会记录断开操作的相关信息</li><li>客户端协议栈收到FIN为1的TCP头部时，会将客户端自己的套接字标记为进入断开的状态，同时向服务器发送一个ACK号表示确认收到服务器的断开操作</li><li>过了一会应用程序读取了全部的数据之后，客户端协议栈也会与服务器协议栈一样，生成一个包含断开信息FIN为1的包，委托IP模块发送给服务器</li><li>服务务器最后会返回包含ACK号的确认包，最后会删除对应的套接字</li></ul><p>可以看见断开连接一共需要发送4个数据包（服务器两个，客户端两个），因此被称为四次挥手。</p><h3 id="udp" tabindex="-1">UDP <a class="header-anchor" href="#udp" aria-hidden="true">#</a></h3><p>TCP的三次握手和四次挥手可以确保数据的准确性，但会导致效率下降，在某些对数据准确性不做要求的场景如DNS服务器查询、音视频数据都采用UDP传输</p><h2 id="网络层" tabindex="-1">网络层 <a class="header-anchor" href="#网络层" aria-hidden="true">#</a></h2><h3 id="ip地址" tabindex="-1">IP地址 <a class="header-anchor" href="#ip地址" aria-hidden="true">#</a></h3><p>路由器的端口是以实际的发送方和接收方来收发网络包的，因此路由器的每个端口都具有MAC地址和IP地址，只接受与自身地址匹配的包。</p><p>路由器根据IP地址表来判断转发目标，实际上这里的IP地址只包含表示子网的网络号部分的比特值（这里就体现了子网掩码的作用，即表示在匹配网络包目标地址时需要对比的比特数量），而表示主机号部分的比特值全部为0（这与交换机不同，交换机会匹配完整的MAC地址），这样就可以将多条某个子网的IP导向同一个端口。</p><p>有时候可能会匹配多条子网记录，此时路由器会寻找网络号比特位最长的（网络号越长，说明主机号越短，子网内可分配的主机越少，可以缩小目标范围），如果网络号比特位相等，则匹配跃点数最小的记录。</p><p>有时地址本身的子网掩码和路由表 中的子网掩码是不一致的，这是路由聚合的结果。路由聚合会将几个子 网合并成一个子网，并在路由表中只产生一条记录。经过路由聚合，多个子网会被合并成一个子网，子网掩码会发生 变化，同时，目标地址列也会改成聚合后的地址。</p><p>IP协议可以根据IP地址来查找包的传输方向，从而确定下一个路由器的位置，因此在传输过程中，IP头部是不会变化的，而MAC头部的信息会随着到达的路由器而改变。</p><h3 id="mac地址" tabindex="-1">Mac地址 <a class="header-anchor" href="#mac地址" aria-hidden="true">#</a></h3><p>MAC地址是网卡生产时写入ROM里的，具有全球唯一性。网卡中保存的MAC地址会由网卡驱动程序读取并分配给MAC模块。</p><p>发送方的MAC地址比较简单，只需要读取网卡中的MAC地址并将它写入MAC头部即可。</p><p>接收方的MAC地址比较麻烦，需要执行根据IP地址查询MAC地址的操作。采用的是以太网中的ARP（广播）技术，即将包发给连接在同一以太网中的所有设备，然后询问某个IP地址所属设备的MAC地址，获得的MAC地址后，将其写入MAC头部的接收方MAC地址。一般会进行ARP缓存加快查询操作。</p><h2 id="链路层和物理层" tabindex="-1">链路层和物理层 <a class="header-anchor" href="#链路层和物理层" aria-hidden="true">#</a></h2><p>从计算机出来的网络包会经过集线器、交换机和路由器等设备被转发，最终到达目的地</p><ul><li>集线器</li><li>交换机</li><li>路由器</li></ul><h2 id="服务器响应" tabindex="-1">服务器响应 <a class="header-anchor" href="#服务器响应" aria-hidden="true">#</a></h2><p>一般的做法是每有一个客户端连接进来，就fork一个新的服务器程序，如PHP</p><ul><li>服务器程序包含两个模块，等待连接模块和负责与客户端通信的模块</li><li>服务器启动后完成初始化操作，运行等待模块，创建套接字，等待客户端的连接</li><li>接收到客户端连接时，等待模块会恢复运行并接收连接，然后启动服务器的客户端通信模块，并移交完成连接的套接字</li><li>每次有新的客户端发起连接，都会启动一个新的客户端通信模块（这个过程需要消耗服务器性能），因此通信模块与客户端是一对一的关系</li></ul><h2 id="cdn" tabindex="-1">CDN <a class="header-anchor" href="#cdn" aria-hidden="true">#</a></h2><p>参考：<a href="https://www.shymean.com/article/%E5%A6%82%E4%BD%95%E8%AE%A9%E7%BD%91%E7%AB%99%E5%8A%A0%E8%BD%BD%E9%80%9F%E5%BA%A6%E5%8F%98%E5%BF%AB#4.%20%E4%BD%BF%E7%94%A8CDN" target="_blank" rel="noopener noreferrer">使用CDN</a></p><p>CDN网络是在用户和服务器之间增加Cache层，如何将用户的请求引导到Cache上获得源服务器的数据，主要是通过接管DNS实现，当业务需要接入到 CDN 时，用户只需调整自己的 DNS 配置信息，将 A 记录改为 CNAME 记录，将内容改为 CDN 厂商所提供的接入域名即可。</p><ul><li>由于CDN对域名解析过程进行了调整，所以解析函数库得到的是该域名对应的CNAME记录，</li><li>为了得到实际的CDN服务器地址，浏览器需要再次对获得的CNAME进行解析，使用全局的负载均衡，分配靠近用户的CDN缓存服务器</li><li>缓存服务器根据浏览器提供的需要访问的域名，使用内部专用DNS解析得到此域名的实际IP，向该原始服务器请求数据，一方面缓存数据，一方面返回给浏览器，后续访问在缓存失效前可直接返回缓存</li><li>浏览器不在意数据从何处返回，能以较小延迟返回即可</li></ul><p>未使用CDN，请求域名过程如下</p><ul><li>用户向浏览器提供要访问的域名；</li><li>浏览器调用域名解析函数库对域名进行解析，以得到此域名对应的IP地址；</li><li>浏览器使用所得到的IP地址，域名的服务主机发出数据访问请求；</li><li>浏览器根据域名主机返回的数据显示网页的内容。</li></ul><blockquote><p>CDN网络是在用户和服务器之间增加Cache层，如何将用户的请求引导到Cache上获得源服务器的数据，主要是通过接管DNS实现</p></blockquote><p><strong>当业务需要接入到 CDN 时，用户只需调整自己的 DNS 配置信息，将 A 记录改为 CNAME 记录，将内容改为 CDN 厂商所提供的接入域名即可。</strong></p><p>使用了CDN，请求域名过程如下</p><ul><li>用户向浏览器提供要访问的域名；</li><li>浏览器调用域名解析库对域名进行解析，由于CDN对域名解析过程进行了调整，所以解析函数库得到的是该域名对应的CNAME记录（由于现在已经是使用了CDN服务，CNAME为CDN服务商域名）</li><li>为了得到实际IP地址，浏览器需要再次对获得的CNAME域名进行解析以得到实际的IP地址； <ul><li>在此过程中，使用的全局负载均衡DNS解析，如根据地理位置信息解析对应的IP地址，使得用户能就近访问。（CDN服务来提供最近的机器）</li><li>此次解析得到CDN缓存服务器的IP地址，浏览器在得到实际的IP地址以后，向缓存服务器发出访问请求；</li><li>缓存服务器根据浏览器提供的要访问的域名，通过Cache内部专用DNS解析得到此域名的实际IP地址，再由缓存服务器向此实际IP地址提交访问请求；</li></ul></li><li>缓存服务器从实际IP地址得得到内容以后，一方面在本地进行保存，以备以后使用，二方面把获取的数据返回给客户端，完成数据服务过程；</li><li>客户端得到由缓存服务器返回的数据以后显示出来并完成整个浏览的数据请求过程。</li></ul></div></div><footer class="page-footer" data-v-8fcebc32 data-v-b65b4b36><div class="edit" data-v-b65b4b36><div class="edit-link" data-v-b65b4b36 data-v-55695e90><!----></div></div><div class="updated" data-v-b65b4b36><!----></div></footer><div class="next-and-prev-link" data-v-8fcebc32 data-v-e65a9748><div class="container" data-v-e65a9748><div class="prev" data-v-e65a9748><a class="link" href="/interview/计算机基础/编译原理" data-v-e65a9748><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-prev" data-v-e65a9748><path d="M19,11H7.4l5.3-5.3c0.4-0.4,0.4-1,0-1.4s-1-0.4-1.4,0l-7,7c-0.1,0.1-0.2,0.2-0.2,0.3c-0.1,0.2-0.1,0.5,0,0.8c0.1,0.1,0.1,0.2,0.2,0.3l7,7c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3c0.4-0.4,0.4-1,0-1.4L7.4,13H19c0.6,0,1-0.4,1-1S19.6,11,19,11z"></path></svg><span class="text" data-v-e65a9748>编译原理</span></a></div><div class="next" data-v-e65a9748><a class="link" href="/interview/计算机基础/软件工程" data-v-e65a9748><span class="text" data-v-e65a9748>软件工程</span><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-next" data-v-e65a9748><path d="M19.9,12.4c0.1-0.2,0.1-0.5,0-0.8c-0.1-0.1-0.1-0.2-0.2-0.3l-7-7c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l5.3,5.3H5c-0.6,0-1,0.4-1,1s0.4,1,1,1h11.6l-5.3,5.3c-0.4,0.4-0.4,1,0,1.4c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3l7-7C19.8,12.6,19.9,12.5,19.9,12.4z"></path></svg></a></div></div></div><!--[--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"app_android.md\":\"a181c9ce\",\"app_flutter.md\":\"f515bb02\",\"app_ios.md\":\"1eba1583\",\"app_webview.md\":\"58fc22cc\",\"readme.md\":\"d8359e04\",\"index.md\":\"8c37c295\",\"前端_css_css3.md\":\"a8d69721\",\"前端_css_readme.md\":\"1a0c99cd\",\"前端_css_分辨率.md\":\"6debbf62\",\"前端_css_基础知识.md\":\"bb24a0e9\",\"前端_css_性能优化.md\":\"1d428186\",\"前端_css_核心知识.md\":\"5c8a18aa\",\"前端_css_编写样式表.md\":\"2393cab5\",\"前端_css_选择器.md\":\"8d2efe94\",\"前端_html_html.md\":\"6888f85e\",\"前端_html_seo优化.md\":\"18abd121\",\"前端_html_web components.md\":\"d2e2e387\",\"前端_html_webassembly.md\":\"f763b06c\",\"前端_html_浏览器解析与渲染流程.md\":\"feec3301\",\"前端_javascript_canvas.md\":\"fe71edfd\",\"前端_javascript_dom和bom.md\":\"e386373b\",\"前端_javascript_ecmascript.md\":\"306272b4\",\"前端_javascript_eventloop.md\":\"dad49dfb\",\"前端_javascript_nodejs.md\":\"41aad6fe\",\"前端_javascript_readme.md\":\"1014db19\",\"前端_javascript_typescript.md\":\"87b58e31\",\"前端_javascript_事件流.md\":\"927305b3\",\"前端_javascript_函数式编程.md\":\"8742c510\",\"前端_javascript_原型.md\":\"51e3fc3c\",\"前端_javascript_数据类型.md\":\"7998939f\",\"前端_javascript_正则.md\":\"8b37b015\",\"前端_javascript_运算符.md\":\"21cafa0e\",\"前端_readme.md\":\"ab123e3e\",\"前端_业务相关_ab测试.md\":\"e21b4e67\",\"前端_业务相关_babel.md\":\"223a9049\",\"前端_业务相关_ci.md\":\"843c3666\",\"前端_业务相关_docker.md\":\"9d9bfe23\",\"前端_业务相关_web直播.md\":\"ccfe19c8\",\"前端_业务相关_git.md\":\"ea8aaed1\",\"前端_业务相关_mock.md\":\"0ea359a0\",\"前端_业务相关_npm.md\":\"0320bd1f\",\"前端_业务相关_webpack.md\":\"231ea6bb\",\"前端_业务相关_web安全.md\":\"6f217686\",\"前端_业务相关_前端工程化.md\":\"59a55c3d\",\"前端_业务相关_单元测试.md\":\"105fb80d\",\"前端_业务相关_可视化页面工具.md\":\"a762b606\",\"前端_业务相关_微前端.md\":\"00a64404\",\"前端_业务相关_性能优化.md\":\"22c16637\",\"前端_业务相关_数据埋点.md\":\"4b392fcd\",\"前端_业务相关_模块化.md\":\"699e8fe0\",\"前端_业务相关_类前端业务.md\":\"1518c654\",\"前端_业务相关_调试.md\":\"b74224c3\",\"前端_业务相关_跨端.md\":\"3399295e\",\"前端_库与框架_chrome扩展程序.md\":\"164ec012\",\"前端_库与框架_electron.md\":\"7016de33\",\"前端_库与框架_immutable.md\":\"b3e9c89d\",\"前端_库与框架_readme.md\":\"c02fdd8d\",\"前端_库与框架_react.md\":\"5c2ba656\",\"前端_库与框架_rxjs.md\":\"ee62fdcc\",\"前端_库与框架_svelet.md\":\"0651e73d\",\"前端_库与框架_vue.md\":\"4ab66354\",\"前端_库与框架_vuex.md\":\"0562f61d\",\"前端_库与框架_diff算法.md\":\"421eb89a\",\"前端_库与框架_几种框架的对比.md\":\"6378b5a1\",\"前端_库与框架_单页面应用router.md\":\"c41c8084\",\"前端_库与框架_微信小程序.md\":\"0eabf379\",\"前端_库与框架_技术选型.md\":\"38e95d40\",\"后台_clickhouse.md\":\"078143d4\",\"后台_java.md\":\"d112d350\",\"后台_mongodb.md\":\"a3e4dffb\",\"后台_mysql.md\":\"c195dbea\",\"后台_php.md\":\"791fb60e\",\"后台_readme.md\":\"dcf7fe6d\",\"后台_restful.md\":\"561380b3\",\"导读.md\":\"fbc538c3\",\"数据结构和算法_readme.md\":\"7336ddb0\",\"数据结构和算法_动态规划.md\":\"2c12c37a\",\"数据结构和算法_基本数据结构.md\":\"409b57c2\",\"数据结构和算法_基本算法.md\":\"082e3f23\",\"数据结构和算法_栈.md\":\"498ae413\",\"游戏开发_readme.md\":\"2a2fa357\",\"游戏开发_tiledmap教程汇总.md\":\"9f943a6e\",\"游戏开发_技能系统.md\":\"94d049cb\",\"游戏开发_游戏开发之前的准备.md\":\"c8451bcf\",\"游戏开发_游戏类型.md\":\"2d673e90\",\"源码分析_readme.md\":\"3363b547\",\"源码分析_reactfibler源码分析.md\":\"f04a13c5\",\"源码分析_react源码分析.md\":\"71769f59\",\"源码分析_redux源码分析.md\":\"489f7654\",\"源码分析_axios源码分析.md\":\"b709d6ad\",\"源码分析_koa源码分析.md\":\"099f4a1f\",\"网络_dns.md\":\"da6f33ac\",\"网络_http.md\":\"9b2f2fd5\",\"网络_nginx.md\":\"757b21cb\",\"网络_readme.md\":\"2814b435\",\"网络_rpc.md\":\"651e6edc\",\"网络_前端网络请求.md\":\"dfd29831\",\"网络_抓包.md\":\"14cc2a9a\",\"计算机基础_readme.md\":\"c2582b09\",\"计算机基础_操作系统.md\":\"e8ebf08e\",\"计算机基础_编译原理.md\":\"78e59630\",\"计算机基础_计算机网络.md\":\"9612960b\",\"计算机基础_软件工程.md\":\"a23cd2bf\",\"读书笔记_readme.md\":\"02cec0b1\",\"读书笔记_如何阅读一本书.md\":\"90e7dc29\",\"面试_readme.md\":\"9f7d45aa\",\"面试_面试记录_2017_dae.md\":\"9ffa0cb7\",\"面试_面试记录_2017_te.md\":\"4af7fa04\",\"面试_面试记录_2018_ayldm.md\":\"78e553fb\",\"面试_面试记录_2018_hdjr.md\":\"a7957552\",\"面试_面试记录_2018_md.md\":\"3d273eb4\",\"面试_面试记录_2018_pakj.md\":\"721ccbcc\",\"面试_面试记录_2018_qkcj.md\":\"d74760cb\",\"面试_面试记录_2018_sfwy.md\":\"727f8ae3\",\"面试_面试记录_2018_tw.md\":\"3457798d\",\"面试_面试记录_2018_yhkj.md\":\"15faec21\",\"面试_面试记录_2018_yskj.md\":\"fb191150\",\"面试_面试记录_2018_z8.md\":\"f92e6e47\",\"面试_面试记录_2019_bcz.md\":\"6a50a51a\",\"面试_面试记录_2019_hkjt.md\":\"45565128\",\"面试_面试记录_2019_jrtt.md\":\"657c087c\",\"面试_面试记录_2019_lds.md\":\"5acb47b1\",\"面试_面试记录_2019_qexr.md\":\"cd2da172\",\"面试_面试记录_2019_wblz.md\":\"93a713cf\",\"面试_面试记录_2019_xflx.md\":\"0469f444\",\"面试_面试题_css.md\":\"de7ab8c1\",\"面试_面试题_dom.md\":\"e0bba38e\",\"面试_面试题_ecmascript.md\":\"ebc72eba\",\"面试_面试题_html.md\":\"6869b9ef\",\"面试_面试题_readme.md\":\"3ea870b6\",\"面试_面试题_react.md\":\"b6c9e1fe\",\"面试_面试题_vue.md\":\"33d60e01\",\"面试_面试题_代码实现.md\":\"b7685612\",\"面试_面试题_代码阅读.md\":\"0048adfd\",\"面试_面试题_其他问题.md\":\"4d3285e4\",\"面试_面试题_兼容及bug.md\":\"bdd9bcf3\",\"面试_面试题_常见需求.md\":\"ba5c5b1d\",\"面试_面试题_算法实现.md\":\"24d2121b\",\"面试_面试题_网络.md\":\"c94234b4\"}")</script>
    <script type="module" async src="/interview/assets/app.062798f6.js"></script>
    
  </body>
</html>