import{_ as s,c as i,o as a,a2 as t}from"./chunks/framework.DLPB9-dE.js";const g=JSON.parse('{"title":"前端开发常见问题","description":"","frontmatter":{},"headers":[],"relativePath":"面试/面试题/兼容及BUG.md","filePath":"面试/面试题/兼容及BUG.md","lastUpdated":1575336317000}'),h={name:"面试/面试题/兼容及BUG.md"},n=t(`<h1 id="前端开发常见问题" tabindex="-1">前端开发常见问题 <a class="header-anchor" href="#前端开发常见问题" aria-label="Permalink to &quot;前端开发常见问题&quot;">​</a></h1><h2 id="兼容问题" tabindex="-1">兼容问题 <a class="header-anchor" href="#兼容问题" aria-label="Permalink to &quot;兼容问题&quot;">​</a></h2><h3 id="不支持新的js语法" tabindex="-1">不支持新的JS语法 <a class="header-anchor" href="#不支持新的js语法" aria-label="Permalink to &quot;不支持新的JS语法&quot;">​</a></h3><p>babel+polyfill编译</p><h3 id="不支持的css语法" tabindex="-1">不支持的CSS语法 <a class="header-anchor" href="#不支持的css语法" aria-label="Permalink to &quot;不支持的CSS语法&quot;">​</a></h3><p>添加浏览器前缀，注意带前缀的属性值在前。可以使用<code>autoprefixer</code>的工具</p><h3 id="ios日期格式" tabindex="-1">iOS日期格式 <a class="header-anchor" href="#ios日期格式" aria-label="Permalink to &quot;iOS日期格式&quot;">​</a></h3><p>在iOS中，日期格式如果为<code>new Date(xxxx-xx-xx)</code>的形式会出现<code>NaN-NaN-NaN NaN:NaN</code>，需要将日期字符串修改为<code>xxxx/xx/xx</code>的形式</p><h3 id="canvas-中getimagedata-获取数据的兼容问题" tabindex="-1">canvas 中getImageData 获取数据的兼容问题 <a class="header-anchor" href="#canvas-中getimagedata-获取数据的兼容问题" aria-label="Permalink to &quot;canvas 中getImageData 获取数据的兼容问题&quot;">​</a></h3><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D/getImageData" target="_blank" rel="noreferrer">getImageData</a> 获取到的data值是一个Uint8ClampedArray ，在低版本的手机上，如iOS8.2等，没有slice方法，需要兼容处理</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> colorData </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ctx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getImageData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.x, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.y, width, height).data</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> rgbaColorArr </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">prototype</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.slice.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">call</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(colorData, index, index </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><h3 id="不同浏览器的标签默认样式的差别" tabindex="-1">不同浏览器的标签默认样式的差别 <a class="header-anchor" href="#不同浏览器的标签默认样式的差别" aria-label="Permalink to &quot;不同浏览器的标签默认样式的差别&quot;">​</a></h3><p>使用样式重置</p><h3 id="ie9一下浏览器不能使用opacity" tabindex="-1">IE9一下浏览器不能使用opacity <a class="header-anchor" href="#ie9一下浏览器不能使用opacity" aria-label="Permalink to &quot;IE9一下浏览器不能使用opacity&quot;">​</a></h3><div class="language-css vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">css</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">.example</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    opacity</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    filter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">alpha</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(opacity = </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="ios上滑动卡顿" tabindex="-1">iOS上滑动卡顿 <a class="header-anchor" href="#ios上滑动卡顿" aria-label="Permalink to &quot;iOS上滑动卡顿&quot;">​</a></h3><p>增加<code>-webkit-overflow-scrolling</code></p><div class="language-css vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">css</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">-webkit-overflow-scrolling: touch;</span></span></code></pre></div><p>如果未某个全屏的容器添加该属性，在safari下会带来新的问题：底部栏不会隐藏。</p><p>我们知道在IOS上使用safari时，当页面下滑，浏览器会自动隐藏底部导航栏。但是添加了上述属性之后，浏览器并不会隐藏底部导航栏，这会导致某些固定在页面底部组件被遮盖。</p><h3 id="css-hack" tabindex="-1">CSS Hack <a class="header-anchor" href="#css-hack" aria-label="Permalink to &quot;CSS Hack&quot;">​</a></h3><p>参考：<a href="https://blog.csdn.net/qq_31635733/article/details/81660897" target="_blank" rel="noreferrer">CSS Hack是什么意思</a></p><p>CSS hack是通过在CSS样式中加入一些特殊的符号，让不同的浏览器识别不同的符号（什么样的浏览器识别什么样的符号是有标准的，CSS hack就是让你记住这个标准），以达到应用不同的CSS样式的目的。</p><p>CSS属性Hack、CSS选择符Hack以及IE条件注释Hack， Hack主要针对IE浏览器。</p><ul><li>属性级Hack：比如IE6能识别下划线“<em>”和星号“<em>”，IE7能识别星号“</em>”，但不能识别下划线”</em> ”，而firefox两个都不能认识。</li><li>选择符级Hack：比如IE6能识别<em>html .class{}，IE7能识别</em>+html .class{}或者*:first-child+html .class{}。</li><li>IE条件注释Hack：IE条件注释是微软IE5开始就提供的一种非标准逻辑语句。比如针对所有IE：&lt;!-[if IE]&gt;&lt;!-您的代码-&gt;&lt;![endif]&gt;，针对IE6及以下版本：&lt;!-[if it IE 7]&gt;&lt;!-您的代码-&gt;&lt;![endif]-&gt;，这类Hack不仅对CSS生效，对写在判断语句里面的所有代码都会生效。</li></ul><p>PS：条件注释只有在IE浏览器下才能执行，这个代码在非IE浏览下被当做注释视而不见。可以通过IE条件注释载入不同的CSS、JS、HTML和服务器代码等。</p><h3 id="emoj表情" tabindex="-1">emoj表情 <a class="header-anchor" href="#emoj表情" aria-label="Permalink to &quot;emoj表情&quot;">​</a></h3><blockquote><p>如何判断当前浏览器是否支持某一个emoji</p></blockquote><p>参考：<a href="https://www.jianshu.com/p/52fe1ff46f93" target="_blank" rel="noreferrer">判断浏览器是否支持某个emoj</a></p><p>综上，主要利用了在大部分系统下emoji不能被上色的原理，对于那些 emoji 可以被上色的平台做降级处理，在2*2的 canvas 上做像素比对。</p><p>想了一下，还是使用切图或者字体图标来统一图标，避免兼容emoj更加合适一点。</p><blockquote><p>在数据库中支持存储emoji</p></blockquote><p>如果是MySQL，需要将版本升级到5.5以上，并设置字符集为utf8mb4，这是一个支持存储emoji字节的字符集。</p><p>参考：[在数据库中支持存储emoji，并在前端页面中显示</p><p>coder_Simon ](<a href="https://www.jianshu.com/p/58982e332e5e" target="_blank" rel="noreferrer">https://www.jianshu.com/p/58982e332e5e</a>)，附emoj正则表达式</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>/\\uD83C[\\uDF00-\\uDFFF]|\\uD83D[\\uDC00-\\uDE4F]/</span></span></code></pre></div><h3 id="ie和safari浏览器无法识别webp图片" tabindex="-1">ie和safari浏览器无法识别webp图片 <a class="header-anchor" href="#ie和safari浏览器无法识别webp图片" aria-label="Permalink to &quot;ie和safari浏览器无法识别webp图片&quot;">​</a></h3><p>需要判断浏览器是否支持webp，如果不支持，则去除图片路径中的webp后缀</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> checkSupportWebp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">fn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> isSupportWebp </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> webpTestsUri </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;data:image/webp;base64,UklGRiQAAABXRUJQVlA4IBgAAAAwAQCdASoBAAEAAwA0JaQAA3AA/vuUAAA=&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> image </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Image</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> addResult</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        isSupportWebp </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> event </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> event.type </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;load&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> image.width </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> :</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 增加全局属性</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        window.isSupportWebp </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> isSupportWebp;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        fn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(isSupportWebp);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    image.onerror </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> addResult;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    image.onload </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> addResult;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    image.src </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> webpTestsUri;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="ios手指按住屏幕滑动时-ui如定时器和css动画不会执行" tabindex="-1">iOS手指按住屏幕滑动时，UI如定时器和CSS动画不会执行 <a class="header-anchor" href="#ios手指按住屏幕滑动时-ui如定时器和css动画不会执行" aria-label="Permalink to &quot;iOS手指按住屏幕滑动时，UI如定时器和CSS动画不会执行&quot;">​</a></h3><p>我们知道浏览器内部至少会有这么两个线程：解析js的线程和渲染界面的线程。这里我们暂且称它们为JS线程和UI线程。</p><p>由于js是可操纵DOM的，如果在修改这些元素属性同时渲染界面（即JS线程和UI线程同时运行），那么渲染线程前后获得的元素数据就可能不一致了。因此为了防止渲染出现不可预期的结果，浏览器控制JS线程和UI线程以列队的形式同步执行。</p><p>在滑动过程中UI线程执行，则会阻塞JS线程的运行。</p><h2 id="常见bug" tabindex="-1">常见bug <a class="header-anchor" href="#常见bug" aria-label="Permalink to &quot;常见bug&quot;">​</a></h2><h3 id="音频文件不自动播放" tabindex="-1">音频文件不自动播放 <a class="header-anchor" href="#音频文件不自动播放" aria-label="Permalink to &quot;音频文件不自动播放&quot;">​</a></h3><p>audio元素和video元素在ios和andriod中无法自动播放。这是因为因为各大浏览器都为了节省流量，做出了优化，在用户没有行为动作时（交互）不予许自动播放； 解决办法：在用户首次点击页面时触发播放</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(window).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">one</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;touchstart&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(){</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    music.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">play</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><h3 id="_1px像素" tabindex="-1">1px像素 <a class="header-anchor" href="#_1px像素" aria-label="Permalink to &quot;1px像素&quot;">​</a></h3><p><a href="https://www.jianshu.com/p/7e63f5a32636" target="_blank" rel="noreferrer">7种方法解决移动端Retina屏幕1px边框问题</a></p><ul><li>border-image</li><li>tarnsform</li></ul><h3 id="ios-fixed定位bug" tabindex="-1">iOS fixed定位BUG <a class="header-anchor" href="#ios-fixed定位bug" aria-label="Permalink to &quot;iOS fixed定位BUG&quot;">​</a></h3><p><a href="https://www.cnblogs.com/shenyu1995/p/5049629.html" target="_blank" rel="noreferrer">ios下fixed回复框bug的解决方案</a></p><h3 id="canvas保存图片模糊" tabindex="-1">canvas保存图片模糊 <a class="header-anchor" href="#canvas保存图片模糊" aria-label="Permalink to &quot;canvas保存图片模糊&quot;">​</a></h3><p>在高清屏下存在这个问题，放大canvas画布的尺寸，保持canvas.stytle.width和height的尺寸，按比例绘制图片，最后使用scale进行缩放，保存图片即可。</p><h3 id="ios图片上传旋转90度" tabindex="-1">iOS图片上传旋转90度 <a class="header-anchor" href="#ios图片上传旋转90度" aria-label="Permalink to &quot;iOS图片上传旋转90度&quot;">​</a></h3><p>使用<code>exif-js</code>这个库</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> file </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> e.target.files[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Orientation</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">EXIF</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(file, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    EXIF</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getAllTags</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Orientation </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> EXIF</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getTag</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Orientation&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (navigator.userAgent.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">match</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF;">iphone</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">i</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 获取图片Orientation参数，=6是正常竖向拍摄，=3是横线拍摄-180度，=8是竖向-180度拍摄</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 绘制的时候将图片旋转rotate度</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><h3 id="键盘弹起收缩后区域留白" tabindex="-1">键盘弹起收缩后区域留白 <a class="header-anchor" href="#键盘弹起收缩后区域留白" aria-label="Permalink to &quot;键盘弹起收缩后区域留白&quot;">​</a></h3><p>在<code>input</code>的<code>blur</code>事件后触发一次滚动，或者使用<a href="https://developer.mozilla.org/zh-CN/docs/Web/Events/focusout" target="_blank" rel="noreferrer">focusout</a>事件</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">document.body.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;focusout&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//解决键盘弹起收缩后页面留白问题</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> scrollHeight </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> document.documentElement.scrollTop </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> document.body.scrollTop </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  window.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">scrollTo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, Math.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">max</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(scrollHeight </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><h3 id="点击穿透" tabindex="-1">点击穿透 <a class="header-anchor" href="#点击穿透" aria-label="Permalink to &quot;点击穿透&quot;">​</a></h3><p>移动端提供了一个双击放大的功能，因此当<code>click</code>事件触发后，有大约300ms的延迟判断是否是双击，而不会直接触发click事件。移动端提供了touchstart、touchmove、touchend等事件，不会有300ms的延迟</p><p>事件触发顺序: touchstart &gt; touchmove &gt; touchend &gt; click</p><p>场景：页面上有一个遮罩关闭按钮，点击关闭通过<code>touchstart</code>蒙层后发现触发了关闭按钮下面同位置的按钮的click事件。在跳转到新页面时如果加载很快也可能出现这种问题</p><p>解决方案：</p><ul><li>不混合touch和click</li><li>触发touch后的短暂时间内禁用click，如<code>pointer-event</code>等</li></ul>`,66),e=[n];function l(p,k,r,d,E,o){return a(),i("div",null,e)}const y=s(h,[["render",l]]);export{g as __pageData,y as default};
