import{_ as e,c as t,o as a,a2 as r}from"./chunks/framework.DLPB9-dE.js";const m=JSON.parse('{"title":"一些框架","description":"","frontmatter":{},"headers":[],"relativePath":"前端/库与框架/微信小程序.md","filePath":"前端/库与框架/微信小程序.md","lastUpdated":1621867712000}'),o={name:"前端/库与框架/微信小程序.md"},i=r('<h1 id="一些框架" tabindex="-1">一些框架 <a class="header-anchor" href="#一些框架" aria-label="Permalink to &quot;一些框架&quot;">​</a></h1><h2 id="uni-app" tabindex="-1">uni-app <a class="header-anchor" href="#uni-app" aria-label="Permalink to &quot;uni-app&quot;">​</a></h2><p>Vue风格的语法，跨多端</p><h2 id="taro" tabindex="-1">taro <a class="header-anchor" href="#taro" aria-label="Permalink to &quot;taro&quot;">​</a></h2><p>React风格的语法，跨多端</p><h2 id="wepy" tabindex="-1">wepy <a class="header-anchor" href="#wepy" aria-label="Permalink to &quot;wepy&quot;">​</a></h2><p>腾讯开发团队出品，参考</p><ul><li><a href="https://github.com/Tencent/wepy" target="_blank" rel="noreferrer">wepy项目地址</a></li><li><a href="https://juejin.im/post/5b02358b6fb9a07a9e4d840b" target="_blank" rel="noreferrer">深入wepy源码：wepy运行原理分析</a></li><li><a href="https://www.cnblogs.com/zhuanzhuanfe/archive/2017/08/22/7412536.html" target="_blank" rel="noreferrer">像VUE一样写微信小程序-深入研究wepy框架</a></li></ul><h2 id="mpvue" tabindex="-1">mpvue <a class="header-anchor" href="#mpvue" aria-label="Permalink to &quot;mpvue&quot;">​</a></h2><p>貌似已经不维护了</p><h1 id="一些技术难点" tabindex="-1">一些技术难点 <a class="header-anchor" href="#一些技术难点" aria-label="Permalink to &quot;一些技术难点&quot;">​</a></h1><h2 id="微信小程序蓝牙打印机" tabindex="-1">微信小程序蓝牙打印机 <a class="header-anchor" href="#微信小程序蓝牙打印机" aria-label="Permalink to &quot;微信小程序蓝牙打印机&quot;">​</a></h2><p>参考</p><p><a href="https://github.com/lerpo/bluethooth/tree/491b9a1d6d7b7027ae90163db14d4c2ae1752ac5" target="_blank" rel="noreferrer">https://github.com/lerpo/bluethooth/tree/491b9a1d6d7b7027ae90163db14d4c2ae1752ac5</a></p><p><a href="https://www.jianshu.com/p/20419462e381" target="_blank" rel="noreferrer">https://www.jianshu.com/p/20419462e381</a></p><p><a href="https://github.com/qihang666/BluetoothPrinter" target="_blank" rel="noreferrer">https://github.com/qihang666/BluetoothPrinter</a></p><p><a href="https://juejin.cn/post/6844903928417681416" target="_blank" rel="noreferrer">https://juejin.cn/post/6844903928417681416</a></p><p><a href="https://github.com/benioZhang/miniprogram-bluetoothprinter" target="_blank" rel="noreferrer">https://github.com/benioZhang/miniprogram-bluetoothprinter</a></p><p><a href="http://www.lucklnk.com/godaddy/details/aid/590653954" target="_blank" rel="noreferrer">http://www.lucklnk.com/godaddy/details/aid/590653954</a> 这篇可以 ，掘金转载 <a href="https://juejin.cn/post/6844903928417681416" target="_blank" rel="noreferrer">https://juejin.cn/post/6844903928417681416</a></p><p><a href="https://github.com/xiaowang1314/uniapp-plugin-collections/tree/master/template/BluPrint" target="_blank" rel="noreferrer">https://github.com/xiaowang1314/uniapp-plugin-collections/tree/master/template/BluPrint</a> ，一个uni-app蓝牙打印demo</p><p><a href="https://dayin.liuzijin.cn/" target="_blank" rel="noreferrer">https://dayin.liuzijin.cn/</a> 这是一个云模板打印文档</p><h3 id="打印指令" tabindex="-1">打印指令 <a class="header-anchor" href="#打印指令" aria-label="Permalink to &quot;打印指令&quot;">​</a></h3><p>打印机指令，参考 <a href="https://blog.csdn.net/weixin_34355881/article/details/89543300" target="_blank" rel="noreferrer">https://blog.csdn.net/weixin_34355881/article/details/89543300</a></p><p>打印指令，又称打印控制命令。计算机通过打印控制语言，以软件命令的方法来控制打印机操作，解释执行打印数据，获得打印结果的</p><h3 id="开发步骤" tabindex="-1">开发步骤 <a class="header-anchor" href="#开发步骤" aria-label="Permalink to &quot;开发步骤&quot;">​</a></h3><p>首先是连接蓝牙，步骤比较繁琐</p><ul><li>开启适配器，<code>wx.openBluetoothAdapter</code>和</li><li>查找蓝牙设备列表，每个蓝牙有对应的deviceId，<code>wx.startBluetoothDevicesDiscovery</code>和<code>wx.onBluetoothDevi*ceFound</code></li><li>选中一个蓝牙，使用deviceId链接，<code>wx.createBLEConnection</code></li><li>获取选中蓝牙设备的服务<code>wx.getBLEDeviceServices</code>，返回服务列表，每个服务有serviceId</li><li>通过deviceId和serviceId获取服务的所有特征值，<code>wx.getBLEDeviceCharacteristics</code></li><li>每个特征值有对应的标记<code>properties</code>和<code>uuid</code>，标记有<code>read</code>、<code>write</code>、<code>notify</code>和<code>indicate</code>，其值为布尔值表示是否支持对应功能</li><li>可以找到某个特征值可write标记的的uuid，然后通过deviceId、serviceId和 characteristicId，使用<code>wx.writeBLECharacteristicValue</code>向打印机传输数据</li></ul><p>文字排版排版，使用printerJobs这个库 <a href="https://github.com/benioZhang/miniprogram-bluetoothprinter" target="_blank" rel="noreferrer">https://github.com/benioZhang/miniprogram-bluetoothprinter</a></p><p>二维码，打印图片，先将二维码绘制到canvas上，然后通过获取像素点信息，进行转换之后传输到打印机上打印，由于图片信息较多，100x100的图片获得的数组长度是 <code>100*100*4</code>，而小程序低功耗蓝牙限制了一次只能传输20个字节的数据，因此耗时比较久，需要考虑优化</p><p>打印图片参考 <a href="https://blog.csdn.net/cfujiC/article/details/86013122" target="_blank" rel="noreferrer">https://blog.csdn.net/cfujiC/article/details/86013122</a></p><p>如何打印文字和二维码混排的打印呢，打印机只能从上到下一行一行打印，如果文字在左边，二维码在右边，貌似只有全部转换成图片然后打印</p>',31),n=[i];function l(c,h,p,d,s,u){return a(),t("div",null,n)}const f=e(o,[["render",l]]);export{m as __pageData,f as default};
